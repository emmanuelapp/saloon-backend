@(event: Event, sessions: List[models.Session], exponents: List[Exponent], actions: List[UserAction], filter: String)

@import services.UserActionSrv

<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		<meta name="viewport" content="width=device-width"/>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
		<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
		<style>
			.header .caption {
				display: block;
				margin: auto;
			}
			.mood .good { color: #5cb85c; }
			.mood .reserved { color: #f0ad4e; }
			.mood .bad { color: #d9534f; }
		</style>
	</head>
	<body>
		<!-- http://www.saloonapp.co/exemples/cr.html -->
		<div class="container">
			<div class="header">
				<img class="caption" src="@event.landingUrl">
			</div>
			<div class="heading">
				Salut,<br>
				Félicitations pour avoir participé à <b>@event.name</b>.
				@if(filter == "all"){ Voici le compte rendu complet de l'événement. }
				@if(filter == "favorite"){ Voici le compte rendu de ton événement. }
			</div>

			@UserActionSrv.listOpt(UserActionSrv.seenExponents(actions, exponents)).map { exponents =>
				<div class="container-fluid">
					<h3>Les exposants auxquels tu as rendu visite</h3>
					<div class="row">
						@exponents.map { case (exponent, moodOpt, comments) => @Mail.partials.exponent(exponent, moodOpt, comments) }
					</div>
				</div>
			}.getOrElse {
				<div>Tu n'as rendu visite à aucune exposant.</div>
			}

			@UserActionSrv.listOpt(UserActionSrv.favoriteSessions(actions, sessions)).map { sessions =>
				<div class="container-fluid">
					<h3>Voici tes sessions favorites</h3>
					<div class="row">
						@sessions.map { case (session, moodOpt, comments) => @Mail.partials.session(session, moodOpt, comments) }
					</div>
				</div>
			}.getOrElse {
				<div>Tu n'as mis aucune session en favoris.</div>
			}

			@if(filter == "all"){
				@UserActionSrv.listOpt(UserActionSrv.notFavoriteSessions(actions, sessions)).map { sessions =>
					<div>
						<h3>Toutes les sessions</h3>
						<div class="row">
							@sessions.map { case (session, moodOpt, comments) => @Mail.partials.session(session, moodOpt, comments) }
						</div>
					</div>
				}
				@UserActionSrv.listOpt(UserActionSrv.notSeenExponents(actions, exponents)).map { exponents =>
					<div>
						<h3>Tous les exposants</h3>
						<div class="row">
							@exponents.map { case (exponent, moodOpt, comments) => @Mail.partials.exponent(exponent, moodOpt, comments) }
						</div>
					</div>
				}
			}
			@if(filter == "favorite"){
				@UserActionSrv.listOpt(UserActionSrv.favoriteNotSeenExponents(actions, exponents)).map { exponents =>
					<div>
						<h3>Les autres exposants en favoris</h3>
						<div class="row">
							@exponents.map { case (exponent, moodOpt, comments) => @Mail.partials.exponent(exponent, moodOpt, comments) }
						</div>
					</div>
				}
			}

			PS: n'hésites pas à nous faire un feedback sur ce mail, l'application ou SalooN de manière générale.<br>
			<br>
			Bonne continuation,<br>
			L'équipe SalooN !<br>
			<br>
		</div>
	</body>
</html>