@import play.api.libs.json.Json
@import conferences.models.{Conference, ConferenceId}
@(conferenceList: List[Conference], height: Int = 500)(implicit lang: Lang)
@fullCalendarEvents(conferenceList: List[Conference]) = @{
    Json.stringify((Json.obj("events" ->
            conferenceList.map(c => Json.obj(
                "title" -> c.name,
                "start" -> c.start.toString("yyyy-MM-dd"),
                "end" -> c.end.plusDays(1).toString("yyyy-MM-dd"), // fullCalendar exclude last day
                "url" -> conferences.controllers.routes.Application.detail(c.id).url
            ))
    ) \ "events"))
}
@fullCalendarRemoteEvents() = @{
    Json.stringify(Json.obj(
        "searchUrl" -> conferences.controllers.routes.Application.apiSearch(after = Some("START_DATE"), before = Some("END_DATE")).url,
        "eventUrl" -> conferences.controllers.routes.Application.detail(ConferenceId("ID")).url
    ))
}
<div class="full-calendar"
    lang="@lang.toLocale"
    height="@height"
    @if(conferenceList.length > 0){events="@fullCalendarEvents(conferenceList)"}
    @if(conferenceList.length == 0){remote-events="@fullCalendarRemoteEvents()"}
    @if(conferenceList.length > 0){default-date="@conferenceList.map(_.start.getMillis).min"}>
</div>
