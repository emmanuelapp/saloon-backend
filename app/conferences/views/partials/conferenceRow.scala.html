@import conferences.models.Conference
@import common.views.html.format._
@(conference: Conference, context: String)(implicit lang: Lang, req: RequestHeader)
<tr>
    <td><a href="@conferences.controllers.routes.Application.detail(conference.id)">@conference.name</a></td>
    <td>@period(Some(conference.start), Some(conference.end))</td>
    <td>
    @conference.location.map { location =>
        @location.locality, @location.country
    }
    </td>
    <td>
        <div role="group">
            <a href="@conference.siteUrl" target="_blank" class="btn btn-default"><i class="fa fa-globe"></i></a>
            @conference.videosUrl.map{url => <a href="@url" target="_blank" class="btn btn-default"><i class="fa fa-video-camera"></i></a>}
            @conference.social.flatMap(_.twitter.flatMap(_.account)).map { account =>
                <a href="https://twitter.com/@account" target="_blank" class="btn btn-default"><i class="fa fa-twitter"></i></a>
            }
            @conference.social.flatMap(_.twitter.flatMap(_.hashtag)).map { hashtag =>
                <a href="https://twitter.com/search?q=%23@hashtag" target="_blank" class="btn btn-default"><i class="fa fa-twitter"></i></a>
            }
        </div>
    </td>
    <td>
        @datetime(conference.created)
        @conference.createdBy.filter(_.public || req.getQueryString("admin") == Some("lkn")).map { user =>
            par @user.twitter.map("https://twitter.com/"+_).orElse(user.siteUrl).map{url => <a href="@url" target="_blank" style="white-space: nowrap;">@user.name</a>}.getOrElse{<span style="white-space: nowrap;">@user.name</span>}
        }
    </td>
    <td>
        @if(context == "public"){
            <a href="@conferences.controllers.routes.Application.edit(conference.id)"><i class="fa fa-pencil"></i></a>
        }
        @if(context == "history"){
            <a href="@conferences.controllers.routes.Application.history(conference.id)"><i class="fa fa-history"></i></a>
            <a href="@conferences.controllers.routes.Application.editVersion(conference.id, conference.created.getMillis())"><i class="fa fa-pencil"></i></a>
            <form method="POST" action="@conferences.controllers.routes.Application.doDelete(conference.id, conference.created.getMillis())" class="inline"><button type="submit" class="btn btn-link"><i class="fa fa-trash-o"></i></button></form>
        }
    </td>
</tr>
